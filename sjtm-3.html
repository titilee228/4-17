<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据脱敏</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.0/dist/echarts.min.js"></script>
    <style>
        /* 基础样式和变量 */
        :root {
            --primary-color: #1648A3;
            --background-dark: #000B30;
            --background-light: #061B82;
            --border-color: rgba(50, 145, 198, 0.3);
            --text-primary: #e0e0e0;
            --text-secondary: #a0b9d8;
            --highlight-color: #4dabf7;
            --success-color: #67c23a;
            --warning-color: #e6a23c;
            --danger-color: #f44336;
            --card-background: rgba(6, 27, 130, 0.5);
            --hover-color: rgba(50, 145, 198, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }

        body {
            width: 100%;
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, var(--background-dark) 0%, var(--background-light) 100%) fixed;
            color: var(--text-primary);
            position: relative;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(22, 72, 163, 0.3) 1px, transparent 1px),
                linear-gradient(90deg, rgba(22, 72, 163, 0.3) 1px, transparent 1px);
            background-size: 20px 20px;
            z-index: -1;
        }

        /* 顶部导航栏 */
        .top-nav {
            height: 60px;
            background-color: rgba(6, 27, 130, 0.8);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            border-bottom: 1px solid rgba(50, 145, 198, 0.5);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 100;
        }

        .system-title {
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 0 0 10px rgba(50, 145, 198, 0.7);
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            letter-spacing: 0.1em;
        }

        .user-info {
            position: absolute;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-info span {
            font-size: 16px;
            color: white;
        }

        .logout-btn {
            background-color: rgba(50, 145, 198, 0.3);
            color: white;
            border: 1px solid #3291C6;
            border-radius: 4px;
            padding: 5px 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
        }

        .logout-btn:hover {
            background-color: rgba(50, 145, 198, 0.7);
            box-shadow: 0 0 10px rgba(50, 145, 198, 0.7);
        }

        /* 主容器 */
        .main-container {
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 1920px;
            margin: 0 auto;
            height: calc(100vh - 50px);
            max-height: 950px; /* 确保总高度不超过1000px */
            overflow: hidden;
        }

        /* 控制面板 */
        .control-panel {
            background-color: var(--card-background);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            padding: 8px;
            display: flex;
            gap: 15px;
            align-items: center;
            position: relative;
            overflow: hidden;
            flex: 0 0 auto; /* 确保不伸缩 */
        }

        .control-panel::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3291C6, transparent);
        }

        .control-panel::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3291C6, transparent);
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-label {
            color: var(--text-primary);
            font-size: 14px;
            white-space: nowrap;
        }

        .control-select {
            background-color: rgba(10, 20, 50, 0.7);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--text-primary);
            padding: 6px 10px;
            min-width: 100px;
            cursor: pointer;
            outline: none;
            font-size: 14px;
        }

        .control-select option {
            background-color: #0A1432;
        }

        /* 面板样式 */
        .panel-row {
            display: flex;
            gap: 15px;
            width: 100%;
            flex: 1;
        }

        .panel {
            background-color: var(--card-background);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            flex: 1;
            position: relative;
        }

        .panel::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3291C6, transparent);
        }

        .panel::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3291C6, transparent);
        }

        .panel:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        .panel-header {
            background-color: rgba(22, 72, 163, 0.7);
            padding: 8px 15px;
            color: var(--text-primary);
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }

        .panel-content {
            /*padding: 10px;*/
            flex: 1;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        /* 仪表盘容器 */
        .gauge-container {
            width: calc(50% - 5px);
            height: 160px; /* 进一步减小高度 */
            position: relative;
        }

        .gauge-title {
            position: absolute;
            bottom: 35px;
            left: 0;
            right: 0;
            text-align: center;
            color: var(--text-secondary);
            font-size: 14px;
            z-index: 10;
        }

        /* 图表容器 */
        .charts-panel .panel-content {
            flex-direction: row;
            flex-wrap: nowrap;
        }

        .chart-container {
            width: 50%;
            height: 220px; /* 进一步减小高度 */
        }

        /* 响应式设计 */
        @media screen and (max-width: 1600px) {
            .panel-row {
                flex-direction: column;
            }
            
            .panel {
                width: 100%;
            }
            
            .charts-panel .panel-content {
                flex-direction: column;
            }
            
            .chart-container {
                width: 100%;
                height: 300px;
            }
        }

        @media screen and (max-width: 768px) {
            .system-title {
                position: static;
                transform: none;
                font-size: 18px;
            }

            .top-nav {
                padding: 10px 15px;
                height: auto;
                flex-direction: column;
                gap: 10px;
            }

            .user-info {
                position: static;
                right: auto;
            }

            .main-container {
                padding: 10px;
            }

            .control-panel {
                flex-direction: column;
                align-items: flex-start;
            }

            .gauge-container {
                width: 100%;
                height: 180px;
            }
        }
    </style>
</head>
<body>
    <!-- 顶部导航栏 -->
    <div class="top-nav">
        <div class="system-title">数据脱敏</div>
        <div class="user-info">
            <span>管理员</span>
            <button class="logout-btn">退出</button>
        </div>
    </div>

    <!-- 主内容区域 -->
    <div class="main-container">
        <!-- 控制面板 -->
      

        <!-- 第一行仪表盘 -->
        <div class="panel-row">
            <!-- 实时观测数据精度评估面板 -->
            <div class="panel">
                <div class="panel-header">
                    <span>数据脱敏 - 基准站1脱敏偏移量</span>
                </div>
                <div class="panel-content">
                    <div class="gauge-container" id="real-horizontal-rms">
                        <div class="gauge-title">平面坐标偏移量(m)</div>
                    </div>
                    <div class="gauge-container" id="real-vertical-rms">
                        <div class="gauge-title">高程移量(m)</div>
                    </div>
                </div>
            </div>

            <!-- 非实时观测数据精度面板 -->
            <div class="panel">
                <div class="panel-header">
                    <span>数据脱敏 - 基准站1脱敏坐标精度</span>
                </div>
                <div class="panel-content">
                    <div class="gauge-container" id="nonreal-horizontal-rms">
                        <div class="gauge-title">水平方向(cm)</div>
                    </div>
                    <div class="gauge-container" id="nonreal-vertical-rms">
                        <div class="gauge-title">高程方向(cm)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 第二行仪表盘 -->
        <div class="panel-row">
            <!-- 实时观测数据面板 -->
            <div class="panel">
                <div class="panel-header">
                    <span>数据脱敏 - 基准站2脱敏偏移量</span>
                </div>
                <div class="panel-content">
                    <div class="gauge-container" id="real-horizontal-error">
                        <div class="gauge-title">平面坐标偏移量(m)</div>
                    </div>
                    <div class="gauge-container" id="real-vertical-error">
                        <div class="gauge-title">高程移量(m)</div>
                    </div>
                </div>
            </div>

            <!-- 非实时观测数据面板 -->
            <div class="panel">
                <div class="panel-header">
                    <span>数据脱敏 - 基准站2脱敏坐标精度</span>
                </div>
                <div class="panel-content">
                    <div class="gauge-container" id="nonreal-horizontal-error">
                        <div class="gauge-title">水平方向(cm)</div>
                    </div>
                    <div class="gauge-container" id="nonreal-vertical-error">
                        <div class="gauge-title">高程方向(cm)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 第三行折线图 -->
        <div class="panel-row">
            <div class="panel charts-panel">
                <div class="panel-header">
                    <span>精度监视</span>
                </div>
                <div class="panel-content">
                    <div class="chart-container" id="real-time-chart">
                        <!-- 实时观测数据RMSE折线图 -->
                    </div>
                    <div class="chart-container" id="non-real-time-chart">
                        <!-- 非实时观测数据折线图 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JS 脚本 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化仪表盘
            initGauge('real-horizontal-rms', 200, '200');
            initGauge('real-vertical-rms', 0, '0');
            initGauge('nonreal-horizontal-rms', 1.5, '1.5');
            initGauge('nonreal-vertical-rms', 3.4, '3.4');
            
            initGauge('real-horizontal-error', 200, '200');
            initGauge('real-vertical-error',  0, '0');
            initGauge('nonreal-horizontal-error', 0.8, '0.8');
            initGauge('nonreal-vertical-error', 2.9, '2.9');

            // 初始化折线图
            initRealTimeChart();
            initNonRealTimeChart();

            // 响应窗口大小变化
            window.addEventListener('resize', function() {
                resizeAllCharts();
            });
            
            // 退出按钮点击事件
            document.querySelector('.logout-btn').addEventListener('click', function() {
                alert('您已成功退出系统');
            });
        });

        // 保存所有图表实例的对象
        const chartInstances = {};

        // 初始化仪表盘函数
        function initGauge(containerId, value, displayValue) {
            const chartDom = document.getElementById(containerId);
            const myChart = echarts.init(chartDom);
            chartInstances[containerId] = myChart;
            
            const option = {
                backgroundColor: 'transparent',
                series: [{
                    type: 'gauge',
                    startAngle: 180,
                    endAngle: 0,
                    center: ['50%', '80%'],
                    radius: '100%',
                    min: 0,
                    max: 100,
                    splitNumber: 8,
                    axisLine: {
                        lineStyle: {
                            width: 5,
                            color: [
                                [0.3, '#67e0e3'],
                                [0.7, '#37a2da'],
                                [1, '#fd666d']
                            ]
                        }
                    },
                    pointer: {
                        icon: 'path://M12.8,0.7l12,40.1H0.7L12.8,0.7z',
                        length: '12%',
                        width: 6,
                        offsetCenter: [0, '-60%'],
                        itemStyle: {
                            color: '#64B5F6'
                        }
                    },
                    axisTick: {
                        length: 10,
                        lineStyle: {
                            color: 'auto',
                            width: 1
                        }
                    },
                    splitLine: {
                        length: 15,
                        lineStyle: {
                            color: 'auto',
                            width: 2
                        }
                    },
                    axisLabel: {
                        color: '#A4CAFD',
                        fontSize: 10,
                        distance: -55,
                        formatter: function(value) {
                            if (value === 0 || value === 100) {
                                return value + '';
                            }
                            return '';
                        }
                    },
                    title: {
                        offsetCenter: [0, '-15%'],
                        fontSize: 20,
                        fontWeight: 'bolder',
                        fontFamily: 'Arial',
                        color: '#FFFFFF',
                        textShadow: '0 0 5px rgba(0, 0, 0, 0.7)'
                    },
                    detail: {
                        fontSize: 24,
                        offsetCenter: [0, '5%'],
                        valueAnimation: true,
                        formatter: function(value) {
                            return displayValue;
                        },
                        color: '#FFFFFF'
                    },
                    data: [{
                        value: value,
                        name: ''
                    }]
                }]
            };
            
            myChart.setOption(option);
        }

        // 初始化实时观测数据折线图
        function initRealTimeChart() {
            const chartDom = document.getElementById('real-time-chart');
            const myChart = echarts.init(chartDom);
            chartInstances['real-time-chart'] = myChart;
            
            const timeData = ['03:30', '04:00', '04:30', '05:00', '05:30', '06:00', 
                             '06:30', '07:00', '07:30', '08:00', '08:30', '09:00',
                             '09:30', '10:00', '10:30', '11:00'];
            
            const option = {
                backgroundColor: 'transparent',
                title: {
                    text: '基准站脱敏偏移量监测(m)',
                    left: 'center',
                    textStyle: {
                        color: '#a0b9d8',
                        fontSize: 14
                    },
                    top: 5
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross',
                        label: {
                            backgroundColor: '#6a7985'
                        }
                    }
                },
                legend: {
                    data: ['基准站1平面', '基准站1高程', '基准站2平面', '基准站2高程'],
                    textStyle: {
                        color: '#a0b9d8',
                        fontSize: 12
                    },
                    top: 25,
                    itemWidth: 10,
                    itemHeight: 10
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    top: 60,
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: timeData,
                    axisLine: {
                        lineStyle: {
                            color: '#1648A3'
                        }
                    },
                    axisLabel: {
                        color: '#a0b9d8',
                        fontSize: 10
                    }
                },
                yAxis: {
                    type: 'value',
                    max: 80,
                    axisLine: {
                        lineStyle: {
                            color: '#1648A3'
                        }
                    },
                    axisLabel: {
                        color: '#a0b9d8',
                        formatter: '{value}°',
                        fontSize: 10
                    },
                    splitLine: {
                        lineStyle: {
                            color: 'rgba(50, 145, 198, 0.1)'
                        }
                    }
                },
                series: [
                    {
                        name: '基准站1平面',
                        type: 'line',
                        smooth: true,
                        lineStyle: {
                            width: 2,
                            color: '#67c23a'
                        },
                        symbol: 'circle',
                        symbolSize: 5,
                        data: [30, 32, 35, 40, 42, 45, 48, 50, 48, 45, 42, 40, 38, 35, 33, 30]
                    },
                    {
                        name: '基准站1高程',
                        type: 'line',
                        smooth: true,
                        lineStyle: {
                            width: 2,
                            color: '#e6a23c'
                        },
                        symbol: 'circle',
                        symbolSize: 5,
                        data: [45, 48, 52, 58, 62, 65, 68, 70, 68, 65, 62, 58, 55, 52, 48, 45]
                    },
                    {
                        name: '基准站2平面',
                        type: 'line',
                        smooth: true,
                        lineStyle: {
                            width: 2,
                            color: '#4dabf7'
                        },
                        symbol: 'circle',
                        symbolSize: 5,
                        data: [20, 22, 25, 28, 30, 33, 35, 38, 35, 33, 30, 28, 25, 23, 21, 20]
                    },
                    {
                        name: '基准站2高程',
                        type: 'line',
                        smooth: true,
                        lineStyle: {
                            width: 2,
                            color: '#f44336'
                        },
                        symbol: 'circle',
                        symbolSize: 5,
                        data: [35, 38, 42, 46, 50, 53, 56, 58, 56, 53, 50, 46, 42, 39, 36, 35]
                    }
                ]
            };
            
            myChart.setOption(option);
        }

        // 初始化非实时观测数据折线图
        function initNonRealTimeChart() {
            const chartDom = document.getElementById('non-real-time-chart');
            const myChart = echarts.init(chartDom);
            chartInstances['non-real-time-chart'] = myChart;
            
            const timeData = ['03:30', '04:00', '04:30', '05:00', '05:30', '06:00', 
                             '06:30', '07:00', '07:30', '08:00', '08:30', '09:00',
                             '09:30', '10:00', '10:30', '11:00'];
            
            const option = {
                backgroundColor: 'transparent',
                title: {
                    text: '基准站脱敏坐标精度监测(cm)',
                    left: 'center',
                    textStyle: {
                        color: '#a0b9d8',
                        fontSize: 14
                    },
                    top: 5
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross',
                        label: {
                            backgroundColor: '#6a7985'
                        }
                    }
                },
                legend: {
                    data: ['基准站1水平', '基准站1高程', '基准站2水平', '基准站2高程'],
                    textStyle: {
                        color: '#a0b9d8',
                        fontSize: 12
                    },
                    top: 25,
                    itemWidth: 10,
                    itemHeight: 10
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    top: 60,
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: timeData,
                    axisLine: {
                        lineStyle: {
                            color: '#1648A3'
                        }
                    },
                    axisLabel: {
                        color: '#a0b9d8',
                        fontSize: 10
                    }
                },
                yAxis: {
                    type: 'value',
                    max: 80,
                    axisLine: {
                        lineStyle: {
                            color: '#1648A3'
                        }
                    },
                    axisLabel: {
                        color: '#a0b9d8',
                        formatter: '{value}°',
                        fontSize: 10
                    },
                    splitLine: {
                        lineStyle: {
                            color: 'rgba(50, 145, 198, 0.1)'
                        }
                    }
                },
                series: [
                    {
                        name: '基准站1水平',
                        type: 'line',
                        smooth: true,
                        lineStyle: {
                            width: 2,
                            color: '#4dabf7'
                        },
                        symbol: 'circle',
                        symbolSize: 5,
                        data: [25, 27, 30, 33, 35, 38, 40, 42, 40, 38, 35, 33, 30, 28, 26, 25]
                    },
                    {
                        name: '基准站1高程',
                        type: 'line',
                        smooth: true,
                        lineStyle: {
                            width: 2,
                            color: '#e6a23c'
                        },
                        symbol: 'circle',
                        symbolSize: 5,
                        data: [40, 43, 47, 51, 55, 58, 61, 63, 61, 58, 55, 51, 47, 44, 41, 40]
                    },
                    {
                        name: '基准站2水平',
                        type: 'line',
                        smooth: true,
                        lineStyle: {
                            width: 2,
                            color: '#f44336'
                        },
                        symbol: 'circle',
                        symbolSize: 5,
                        data: [35, 37, 40, 45, 47, 50, 53, 55, 53, 50, 47, 45, 43, 40, 38, 35]
                    },
                    {
                        name: '基准站2高程',
                        type: 'line',
                        smooth: true,
                        lineStyle: {
                            width: 2,
                            color: '#67c23a'
                        },
                        symbol: 'circle',
                        symbolSize: 5,
                        data: [50, 53, 57, 62, 66, 69, 72, 74, 72, 69, 66, 62, 59, 56, 53, 50]
                    }
                ]
            };
            
            myChart.setOption(option);
        }

        // 调整所有图表大小的函数
        function resizeAllCharts() {
            for (const chartId in chartInstances) {
                if (chartInstances.hasOwnProperty(chartId)) {
                    chartInstances[chartId].resize();
                }
            }
        }
    </script>
</body>
</html> 